(function(){"use strict";var e={5325:function(e,t,a){var i=a(9242),s=a(3396);const r={class:"container app"},l=(0,s._)("h1",{class:"app__header"},"Товары категории",-1);function n(e,t,a,i,n,o){const c=(0,s.up)("FiltersRow"),d=(0,s.up)("DataTable");return(0,s.wg)(),(0,s.iD)("section",r,[l,(0,s.Wm)(c,{tableID:n.tableID},null,8,["tableID"]),(0,s.Wm)(d,{tableID:n.tableID,products:n.products},null,8,["tableID","products"])])}var o=JSON.parse('[{"id":1,"sku":"CGN-00871","brand":"California Gold Nutrition","name":"California Gold Nutrition, Baby\'s DHA, Omega-3s with Vitamin D3, 1,050 mg, 2 fl oz (59 ml)","image":"iherb-2.jpg","merchant":"IHerb","category":"Витамины","remain":1002,"reviews":97789,"rating":4.1,"cost":10.06,"loss":10,"position":1,"rate":"-2","like":false,"schedule":[82,92,1,5,10,12,13,18,20,38,54,58,1,5,10,12,13,15,70,78,15,18,20,38,54,58,70,78,82,92]},{"id":2,"sku":"CGN-01034","brand":"California Gold Nutrition","name":"California Gold Nutrition, жидкий витамин D3 для детей, 10 мкг (400 МЕ), 10 мл (0,34 жидк. унции)","image":"iherb.jpg","merchant":"IHerb","category":"Витамины","remain":1003,"reviews":97789,"rating":4.2,"cost":15.27,"loss":15,"position":2,"rate":"-2","like":false,"schedule":[38,54,58,70,78,82,92,1,5,1,5,10,12,13,15,18,20,10,12,13,15,18,20,38,54,58,70,78,82,92]},{"id":3,"sku":"CGN-00871","brand":"California Gold Nutrition","name":"California Gold Nutrition, Baby\'s DHA, Omega-3s with Vitamin D3, 1,050 mg, 2 fl oz (59 ml)","image":"iherb-2.jpg","merchant":"IHerb","category":"Витамины","remain":1004,"reviews":97789,"rating":4.3,"cost":10.06,"loss":25,"position":3,"rate":"0","like":false,"schedule":[1,5,10,12,13,15,18,20,38,54,58,70,13,15,18,20,38,54,58,78,82,92,1,5,10,12,70,78,82,92]},{"id":4,"sku":"NWY-15786","brand":"Nature\'s Way, Alive!","name":"Nature\'s Way, Alive! Kid\'s Chewable Multivitamin, Orange & Berry, 120 Chewable Tablets","image":"iherb-3.jpg","merchant":"IHerb","category":"Витамины","remain":1005,"reviews":97789,"rating":4.4,"cost":3.62,"loss":25,"position":4,"rate":"-2","like":false,"schedule":[1,5,10,12,54,58,70,78,82,92,1,5,10,12,13,13,15,18,20,38,15,18,20,38,54,58,70,78,82,92]},{"id":5,"sku":"CGN-01034","brand":"California Gold Nutrition","name":"California Gold Nutrition, жидкий витамин D3 для детей, 10 мкг (400 МЕ), 10 мл (0,34 жидк. унции)","image":"iherb.jpg","merchant":"IHerb","category":"Витамины","remain":1006,"reviews":97789,"rating":4.5,"cost":15.27,"loss":25,"position":5,"rate":"0","like":false,"schedule":[1,5,10,12,13,15,18,20,15,18,20,38,54,58,70,78,82,92,38,54,58,70,78,82,92,1,5,10,12,13]},{"id":6,"sku":"CGN-00871","brand":"California Gold Nutrition","name":"California Gold Nutrition, Baby\'s DHA, Omega-3s with Vitamin D3, 1,050 mg, 2 fl oz (59 ml)","image":"iherb-2.jpg","merchant":"IHerb","category":"Витамины","remain":1007,"reviews":97789,"rating":4.6,"cost":10.06,"loss":25,"position":6,"rate":"+2","like":false,"schedule":[78,82,92,1,5,10,12,13,15,18,20,1,5,10,12,13,15,18,20,38,54,58,70,38,54,58,70,78,82,92]},{"id":7,"sku":"CGN-01034","brand":"California Gold Nutrition","name":"California Gold Nutrition, жидкий витамин D3 для детей, 10 мкг (400 МЕ), 10 мл (0,34 жидк. унции)","image":"iherb.jpg","merchant":"IHerb","category":"Витамины","remain":1008,"reviews":97789,"rating":4.7,"cost":15.27,"loss":50,"position":7,"rate":"-2","like":false,"schedule":[1,5,10,12,13,15,18,20,12,13,15,18,20,38,54,58,70,38,54,58,70,78,82,92,1,5,10,78,82,92]},{"id":8,"sku":"NWY-15786","brand":"Nature\'s Way, Alive!","name":"Nature\'s Way, Alive! Kid\'s Chewable Multivitamin, Orange & Berry, 120 Chewable Tablets","image":"iherb-3.jpg","merchant":"IHerb","category":"Витамины","remain":1009,"reviews":97789,"rating":4.8,"cost":3.62,"loss":100,"position":8,"rate":"+2","like":false,"schedule":[1,5,10,12,13,15,18,20,38,54,58,70,78,15,18,20,38,54,58,70,78,82,92,1,5,10,12,13,82,92]},{"id":9,"sku":"NWY-15786","brand":"Nature\'s Way, Alive!","name":"Nature\'s Way, Alive! Kid\'s Chewable Multivitamin, Orange & Berry, 120 Chewable Tablets","image":"iherb-3.jpg","merchant":"IHerb","category":"Витамины","remain":1010,"reviews":97789,"rating":4.9,"cost":3.62,"loss":25,"position":9,"rate":"0","like":false,"schedule":[1,5,10,12,13,15,70,78,82,92,1,5,10,12,13,18,20,38,54,58,15,18,20,38,54,58,70,78,82,92]},{"id":10,"sku":"CGN-01034","brand":"California Gold Nutrition","name":"California Gold Nutrition, жидкий витамин D3 для детей, 10 мкг (400 МЕ), 10 мл (0,34 жидк. унции)","image":"iherb.jpg","merchant":"IHerb","category":"Витамины","remain":1001,"reviews":97789,"rating":4,"cost":15.27,"loss":25,"position":10,"rate":"+2","like":false,"schedule":[1,5,10,12,13,15,18,20,38,54,58,70,78,82,92,1,5,10,12,13,15,18,20,38,54,58,70,78,82,92]}]');const c={class:"filters-row"},d={class:"filters-row__left-container"},u={class:"filters-row__right-container"};function h(e,t,a,i,r,l){const n=(0,s.up)("SearchBox"),o=(0,s.up)("LikesBox"),h=(0,s.up)("TableSettings");return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",d,[(0,s.Wm)(n,{tableID:a.tableID,SearchToReset:r.SearchToReset,onSearchBoxReloaded:l.searchBoxReloaded},null,8,["tableID","SearchToReset","onSearchBoxReloaded"]),(0,s.Wm)(o,{tableID:a.tableID,LikesToReset:r.LikesToReset,onLikesBoxReloaded:l.likesBoxReloaded},null,8,["tableID","LikesToReset","onLikesBoxReloaded"])]),(0,s._)("div",u,[(0,s.Wm)(h,{tableID:a.tableID,onReset:l.reset},null,8,["tableID","onReset"])])])}const b={class:"search"};function m(e,t,a,r,l,n){return(0,s.wg)(),(0,s.iD)("div",b,[(0,s.wy)((0,s._)("input",{id:"search",class:"search__input",type:"search",placeholder:"Поиск",onInput:t[0]||(t[0]=(...e)=>n.handle&&n.handle(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e)},null,544),[[i.nr,l.value]])])}var _={name:"SearchBox",props:{tableID:{type:String,required:!0},SearchToReset:{type:Boolean,default:()=>!1}},data(){return{value:""}},methods:{handle(){$$(this.tableID).filterByAll()}},watch:{SearchToReset(e){e&&(this.value="",this.$emit("searchBoxReloaded"))}}},v=a(89);const p=(0,v.Z)(_,[["render",m]]);var g=p;const y={class:"likes-box"},f=(0,s._)("label",{for:"likeInput"},"Только избранное",-1);function k(e,t,a,r,l,n){return(0,s.wg)(),(0,s.iD)("div",y,[(0,s.wy)((0,s._)("input",{id:"likeInput",type:"checkbox",onChange:t[0]||(t[0]=(...e)=>n.handle&&n.handle(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>l.checked=e)},null,544),[[i.e8,l.checked]]),f])}var w={name:"LikesBox",props:{tableID:{type:String,required:!0},LikesToReset:{type:Boolean,default:()=>!1}},data(){return{checked:!1}},methods:{handle(){$$(this.tableID).filterByAll()}},watch:{LikesToReset(e){e&&(this.checked=!1,this.$emit("likesBoxReloaded"))}}};const x=(0,v.Z)(w,[["render",k]]);var C=x;const O=(0,s._)("span",null,"Настройка таблицы",-1),I=[O];function D(e,t,a,i,r,l){const n=(0,s.up)("TableSettingsOverlay");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("button",{class:"table-settings-button",onClick:t[0]||(t[0]=(...e)=>l.openOverlay&&l.openOverlay(...e))},I),(0,s.Wm)(n,{tableID:a.tableID,overlayEnabled:r.overlayEnabled,onCloseOverlay:l.closeOverlay,onReset:l.reset},null,8,["tableID","overlayEnabled","onCloseOverlay","onReset"])],64)}var S=a(7139);const R={class:"table-settings-overlay__body-container"},B=(0,s._)("h2",null,"Колонки",-1),N={class:"table-settings-overlay__checkbox-list"},T=["id","checked","onClick"],W=["for","textContent"],L={class:"table-settings-overlay__reset-container"},$=(0,s._)("span",null,"Сбросить",-1),E=[$];function G(e,t,a,i,r,l){const n=(0,s.up)("OverlayScreen");return(0,s.wg)(),(0,s.j4)(n,{overlayEnabled:a.overlayEnabled,onCloseOverlay:l.closeOverlay},{default:(0,s.w5)((()=>[(0,s._)("div",R,[B,(0,s._)("div",N,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.state,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"table-settings-overlay__checkbox-item",key:e.id},[(0,s._)("input",{type:"checkbox",id:`checkbox-${e.id}`,checked:!e.hidden,onClick:e=>l.handleCheckbox(t)},null,8,T),(0,s._)("label",{for:`checkbox-${e.id}`,textContent:(0,S.zw)(e.name)},null,8,W)])))),128))]),(0,s._)("div",L,[(0,s._)("button",{class:"table-settings-overlay__reset-button",onClick:t[0]||(t[0]=(...e)=>l.handleReset&&l.handleReset(...e))},E)])])])),_:1},8,["overlayEnabled","onCloseOverlay"])}function j(e,t,a,i,r,l){const n=(0,s.up)("OverlayModal"),o=(0,s.up)("OverlayBackground");return(0,s.wg)(),(0,s.j4)(o,{overlayEnabled:a.overlayEnabled,onCloseOverlay:l.closeOverlay},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{onCloseOverlay:l.closeOverlay},{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"default")])),_:3},8,["onCloseOverlay"])])),_:3},8,["overlayEnabled","onCloseOverlay"])}function F(e,t,a,r,l,n){return a.overlayEnabled?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"overlay",onClick:t[0]||(t[0]=(0,i.iM)(((...e)=>n.closeOverlay&&n.closeOverlay(...e)),["self"]))},[(0,s.WI)(e.$slots,"default")])):(0,s.kq)("",!0)}var H={name:"OverlayBackground",props:{overlayEnabled:{type:Boolean,default:()=>!1}},methods:{closeOverlay(){this.$emit("closeOverlay")}}};const A=(0,v.Z)(H,[["render",F]]);var V=A;const Z={class:"modal"},M={class:"modal__close-container"};function q(e,t,a,r,l,n){return(0,s.wg)(),(0,s.iD)("div",Z,[(0,s._)("div",M,[(0,s._)("div",{class:"modal__close-icon",onClick:t[0]||(t[0]=(0,i.iM)(((...e)=>n.closeOverlay&&n.closeOverlay(...e)),["stop"]))})]),(0,s.WI)(e.$slots,"default")])}var z={name:"OverlayModal",methods:{closeOverlay(){this.$emit("closeOverlay")}}};const Y=(0,v.Z)(z,[["render",q]]);var K=Y,P={name:"OverlayScreen",components:{OverlayBackground:V,OverlayModal:K},props:{overlayEnabled:{type:Boolean,default:()=>!1}},methods:{closeOverlay(){this.$emit("closeOverlay")}}};const J=(0,v.Z)(P,[["render",j]]);var U=J,Q={name:"TableSettings",components:{OverlayScreen:U},props:{tableID:{type:String,required:!0},overlayEnabled:{type:Boolean,required:!0}},data(){return{columns:{},state:[]}},methods:{init(){this.table=$$(this.tableID),this.getState()},getState(){this.columns=this.table.getColumns(!0),this.state=this.columns.map((e=>({id:e.id,name:e.header[0].text,hidden:!1}))),this.initial=this.table.getState()},setState(){this.table.refreshColumns(this.columns)},closeOverlay(){this.$emit("closeOverlay")},handleCheckbox(e){const t=this.state[e].id;this.state[e].hidden?this.table.showColumn(t):this.table.hideColumn(t),this.state[e].hidden=!this.state[e].hidden},handleReset(){this.state.forEach((e=>{e.hidden&&(e.hidden=!1,this.table.showColumn(e.id));const t=this.table.getFilter(e.id);if(t){const{config:e}=t;"filter"===e.view&&t.setValue({}),"multiselect"===e.view&&t.setValue([])}this.table.markSorting("","asc")})),this.table.refreshColumns(),this.table.setState(this.initial),this.$emit("reset")}},mounted(){setTimeout((()=>{this.init()}),1e3)}};const X=(0,v.Z)(Q,[["render",G]]);var ee=X,te={name:"TableSettings",components:{TableSettingsOverlay:ee},props:{tableID:{type:String,required:!0}},data(){return{overlayEnabled:!1}},methods:{openOverlay(){this.overlayEnabled=!0},closeOverlay(){this.overlayEnabled=!1},reset(){this.$emit("reset")}}};const ae=(0,v.Z)(te,[["render",D]]);var ie=ae,se={name:"FiltersRow",components:{SearchBox:g,LikesBox:C,TableSettings:ie},props:{tableID:{type:String,required:!0}},data(){return{SearchToReset:!1,LikesToReset:!1}},methods:{reset(){this.SearchToReset=!0,this.LikesToReset=!0},searchBoxReloaded(){this.SearchToReset=!1},likesBoxReloaded(){this.LikesToReset=!1}}};const re=(0,v.Z)(se,[["render",h]]);var le=re;const ne={id:"table"};function oe(e,t,a,i,r,l){return(0,s.wg)(),(0,s.iD)("div",ne)}const ce=e=>{let t="";return e.rate>0?t="table__position-rate_plus":e.rate<0&&(t="table__position-rate_minus"),`\n    <div class="table__position-container">\n      <div>${e.position}</div>\n      <div class="table__position-rate ${t}">${e.rate}</div>\n    </div>\n  `},de=e=>`\n    <div class="table__thumb-container">\n      <img class="table__thumb" src="./assets/thumbs/${e.image}" />\n    </div>\n  `,ue=e=>`\n    <div class="table__like-container">\n      <img class="table__like" src="./assets/icons/${e.like?"favorite_black_24dp.svg":"favorite_border_black_24dp.svg"}" />\n    </div>\n  `,he={position:ce,image:de,like:ue};var be=he;const me=e=>`<img class="table__image" src="./assets/images/${e.image}" />`,_e={image:me};var ve=_e;const pe=({tableID:e,products:t,handleLike:a})=>({id:e,view:"datatable",autoConfig:!0,autowidth:!1,autoheight:!0,resizeColumn:{size:4},dragColumn:"order",scroll:!0,headerRowHeight:40,rowHeight:40,tooltip:()=>"",data:t,columns:[{id:"loss",sort:"int",css:"table__column",header:[{text:"Упущенный %",css:"table__header"},{content:"excelFilter",mode:"number",css:"table__header"}],minWidth:25,width:60,maxWidth:150},{id:"position",sort:"int",css:"table__column",header:[{text:"Позиция",css:"table__header"},{content:"excelFilter",mode:"number",css:"table__header"}],template:be.position,minWidth:50,width:100,maxWidth:150},{id:"image",css:"table__column",header:[{text:"Фото",css:"table__header"},{text:"",css:"table__header"}],template:be.image,minWidth:40,width:60,maxWidth:80,tooltip:ve.image},{id:"sku",sort:"string",css:"table__column table__column_blue",header:[{text:"Артикул",css:"table__header"},{content:"excelFilter",mode:"text",css:"table__header"}]},{id:"like",sort:"string",css:"table__column",header:[{text:"Избранное",css:"table__header table__header_hidden"},{text:"",css:"table__header table__header_hidden"}],template:e=>be.like(e),minWidth:40,width:60,maxWidth:80},{id:"schedule",sort:"string",header:[{text:"График продаж",css:"table__header"},{text:"",css:"table__header"}],css:"table__column",template:webix.Sparklines.getTemplate({type:"bar",width:30}),minWidth:200,width:250,maxWidth:300},{id:"name",sort:"string",css:"table__column table__column_blue",header:[{text:"Имя",css:"table__header"},{content:"excelFilter",mode:"text",css:"table__header"}],minWidth:200,width:250,maxWidth:300},{id:"brand",sort:"string",css:"table__column table__column_blue",header:[{text:"Бренд",css:"table__header"},{content:"excelFilter",mode:"text",css:"table__header"}]},{id:"merchant",sort:"string",css:"table__column table__column_blue",header:[{text:"Продавец",css:"table__header"},{content:"excelFilter",mode:"text",css:"table__header"}]},{id:"category",sort:"string",css:"table__column",header:[{text:"Группа",css:"table__header"},{content:"multiSelectFilter",css:"table__header"}]},{id:"remain",sort:"int",css:"table__column",header:[{text:"Остаток",css:"table__header"},{content:"excelFilter",mode:"number",css:"table__header"}]},{id:"reviews",sort:"int",css:"table__column",header:[{text:"Отзывы",css:"table__header"},{content:"excelFilter",mode:"number",css:"table__header"}]},{id:"rating",sort:"int",css:"table__column",header:[{text:"Рейтинг",css:"table__header"},{content:"excelFilter",mode:"number",css:"table__header"}]},{id:"cost",sort:"int",css:"table__column",header:[{text:"Цена",css:"table__header"},{content:"excelFilter",mode:"number",css:"table__header"}]}],onClick:{table__like:(e,t)=>a(t)}});var ge=pe,ye={name:"DataTable",props:{tableID:{type:String,required:!0},products:{type:Array,default:()=>[]}},computed:{likes(){return this.getLikes()},computedProducts(){const e=this.products;return e.forEach((e=>{e.id in this.likes&&(e.like=!0)})),e},config(){return ge({tableID:this.tableID,products:this.computedProducts,handleLike:this.handleLike})}},methods:{init(){webix.ready((()=>{this.table=webix.ui(this.config,this.$el),this.table.registerFilter(document.getElementById("likeInput"),{columnId:"like",prepare:function(e){return e},compare:function(e,t){return!t||!0===e}},{getValue:function(e){return e.checked},setValue:function(e,t){e.checked=t}}),this.table.registerFilter(document.getElementById("search"),{columnId:"any",prepare:function(e){return e},compare:function(e,t,a){if(t){const e=t.toLowerCase();return a.sku.toLowerCase().includes(e)||a.name.toLowerCase().includes(e)||a.brand.toLowerCase().includes(e)||a.merchant.toLowerCase().includes(e)}return!0}},{getValue:function(e){return e.value},setValue:function(e,t){e.value=t}})}))},getLikes(){const e=localStorage.getItem("likes");try{return e?JSON.parse(e):{}}catch(t){return console.error(t),{}}},setLikes(e){localStorage.setItem("likes",JSON.stringify(e))},handleLike(e){const t=this.table.getItem(e),a=this.likes;t.id in a?delete a[t.id]:a[t.id]=!0,t.like=!t.like,this.setLikes(a),this.table.updateItem(e,t)}},mounted(){this.init()}};const fe=(0,v.Z)(ye,[["render",oe]]);var ke=fe,we={name:"App",components:{FiltersRow:le,DataTable:ke},data(){return{tableID:"webix-table",products:o}}};const xe=(0,v.Z)(we,[["render",n]]);var Ce=xe;(0,i.ri)(Ce).mount("#app")}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,i,s,r){if(!i){var l=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],r=e[d][2];for(var n=!0,o=0;o<i.length;o++)(!1&r||l>=r)&&Object.keys(a.O).every((function(e){return a.O[e](i[o])}))?i.splice(o--,1):(n=!1,r<l&&(l=r));if(n){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[i,s,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,r,l=i[0],n=i[1],o=i[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(s in n)a.o(n,s)&&(a.m[s]=n[s]);if(o)var d=o(a)}for(t&&t(i);c<l.length;c++)r=l[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},i=self["webpackChunkwebix_test_task"]=self["webpackChunkwebix_test_task"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(5325)}));i=a.O(i)})();
//# sourceMappingURL=app.af3bc06d.js.map