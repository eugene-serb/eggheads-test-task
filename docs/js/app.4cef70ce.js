(function(){"use strict";var e={5270:function(e,t,a){var s=a(9242),l=a(3396);const i={class:"container app"},r=(0,l._)("h1",{class:"app__header"},"Товары категории",-1);function o(e,t,a,s,o,n){const d=(0,l.up)("FiltersRow"),c=(0,l.up)("DataTable");return(0,l.wg)(),(0,l.iD)("section",i,[r,(0,l.Wm)(d,{tableID:o.tableID,SearchToReset:o.SearchToReset,LikesToReset:o.LikesToReset,onReset:n.reset,onSearchBoxReloaded:n.searchBoxReloaded,onLikesBoxReloaded:n.likesBoxReloaded},null,8,["tableID","SearchToReset","LikesToReset","onReset","onSearchBoxReloaded","onLikesBoxReloaded"]),(0,l.Wm)(c,{tableID:o.tableID,products:o.products,TableToReset:o.TableToReset,onTableReloaded:n.tableReloaded},null,8,["tableID","products","TableToReset","onTableReloaded"])])}var n=JSON.parse('[{"id":1,"sku":"CGN-00871","brand":"California Gold Nutrition","name":"California Gold Nutrition, Baby\'s DHA, Omega-3s with Vitamin D3, 1,050 mg, 2 fl oz (59 ml)","image":"iherb-2.jpg","merchant":"IHerb","category":"Витамины","remain":1002,"reviews":97789,"rating":4.1,"cost":10.06,"loss":10,"position":1,"rate":"-2","like":false,"schedule":[82,92,1,5,10,12,13,18,20,38,54,58,1,5,10,12,13,15,70,78,15,18,20,38,54,58,70,78,82,92]},{"id":2,"sku":"CGN-01034","brand":"California Gold Nutrition","name":"California Gold Nutrition, жидкий витамин D3 для детей, 10 мкг (400 МЕ), 10 мл (0,34 жидк. унции)","image":"iherb.jpg","merchant":"IHerb","category":"Витамины","remain":1003,"reviews":97789,"rating":4.2,"cost":15.27,"loss":15,"position":2,"rate":"-2","like":false,"schedule":[38,54,58,70,78,82,92,1,5,1,5,10,12,13,15,18,20,10,12,13,15,18,20,38,54,58,70,78,82,92]},{"id":3,"sku":"CGN-00871","brand":"California Gold Nutrition","name":"California Gold Nutrition, Baby\'s DHA, Omega-3s with Vitamin D3, 1,050 mg, 2 fl oz (59 ml)","image":"iherb-2.jpg","merchant":"IHerb","category":"Витамины","remain":1004,"reviews":97789,"rating":4.3,"cost":10.06,"loss":25,"position":3,"rate":"0","like":false,"schedule":[1,5,10,12,13,15,18,20,38,54,58,70,13,15,18,20,38,54,58,78,82,92,1,5,10,12,70,78,82,92]},{"id":4,"sku":"NWY-15786","brand":"Nature\'s Way, Alive!","name":"Nature\'s Way, Alive! Kid\'s Chewable Multivitamin, Orange & Berry, 120 Chewable Tablets","image":"iherb-3.jpg","merchant":"IHerb","category":"Витамины","remain":1005,"reviews":97789,"rating":4.4,"cost":3.62,"loss":25,"position":4,"rate":"-2","like":false,"schedule":[1,5,10,12,54,58,70,78,82,92,1,5,10,12,13,13,15,18,20,38,15,18,20,38,54,58,70,78,82,92]},{"id":5,"sku":"CGN-01034","brand":"California Gold Nutrition","name":"California Gold Nutrition, жидкий витамин D3 для детей, 10 мкг (400 МЕ), 10 мл (0,34 жидк. унции)","image":"iherb.jpg","merchant":"IHerb","category":"Витамины","remain":1006,"reviews":97789,"rating":4.5,"cost":15.27,"loss":25,"position":5,"rate":"0","like":false,"schedule":[1,5,10,12,13,15,18,20,15,18,20,38,54,58,70,78,82,92,38,54,58,70,78,82,92,1,5,10,12,13]},{"id":6,"sku":"CGN-00871","brand":"California Gold Nutrition","name":"California Gold Nutrition, Baby\'s DHA, Omega-3s with Vitamin D3, 1,050 mg, 2 fl oz (59 ml)","image":"iherb-2.jpg","merchant":"IHerb","category":"Витамины","remain":1007,"reviews":97789,"rating":4.6,"cost":10.06,"loss":25,"position":6,"rate":"+2","like":false,"schedule":[78,82,92,1,5,10,12,13,15,18,20,1,5,10,12,13,15,18,20,38,54,58,70,38,54,58,70,78,82,92]},{"id":7,"sku":"CGN-01034","brand":"California Gold Nutrition","name":"California Gold Nutrition, жидкий витамин D3 для детей, 10 мкг (400 МЕ), 10 мл (0,34 жидк. унции)","image":"iherb.jpg","merchant":"IHerb","category":"Витамины","remain":1008,"reviews":97789,"rating":4.7,"cost":15.27,"loss":50,"position":7,"rate":"-2","like":false,"schedule":[1,5,10,12,13,15,18,20,12,13,15,18,20,38,54,58,70,38,54,58,70,78,82,92,1,5,10,78,82,92]},{"id":8,"sku":"NWY-15786","brand":"Nature\'s Way, Alive!","name":"Nature\'s Way, Alive! Kid\'s Chewable Multivitamin, Orange & Berry, 120 Chewable Tablets","image":"iherb-3.jpg","merchant":"IHerb","category":"Витамины","remain":1009,"reviews":97789,"rating":4.8,"cost":3.62,"loss":100,"position":8,"rate":"+2","like":false,"schedule":[1,5,10,12,13,15,18,20,38,54,58,70,78,15,18,20,38,54,58,70,78,82,92,1,5,10,12,13,82,92]},{"id":9,"sku":"NWY-15786","brand":"Nature\'s Way, Alive!","name":"Nature\'s Way, Alive! Kid\'s Chewable Multivitamin, Orange & Berry, 120 Chewable Tablets","image":"iherb-3.jpg","merchant":"IHerb","category":"Витамины","remain":1010,"reviews":97789,"rating":4.9,"cost":3.62,"loss":25,"position":9,"rate":"0","like":false,"schedule":[1,5,10,12,13,15,70,78,82,92,1,5,10,12,13,18,20,38,54,58,15,18,20,38,54,58,70,78,82,92]},{"id":10,"sku":"CGN-01034","brand":"California Gold Nutrition","name":"California Gold Nutrition, жидкий витамин D3 для детей, 10 мкг (400 МЕ), 10 мл (0,34 жидк. унции)","image":"iherb.jpg","merchant":"IHerb","category":"Витамины","remain":1001,"reviews":97789,"rating":4,"cost":15.27,"loss":25,"position":10,"rate":"+2","like":false,"schedule":[1,5,10,12,13,15,18,20,38,54,58,70,78,82,92,1,5,10,12,13,15,18,20,38,54,58,70,78,82,92]}]');const d={class:"filters-row"},c={class:"filters-row__left-container"},h={class:"filters-row__right-container"};function u(e,t,a,s,i,r){const o=(0,l.up)("SearchBox"),n=(0,l.up)("LikesBox"),u=(0,l.up)("TableSettings");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",c,[(0,l.Wm)(o,{tableID:a.tableID,SearchToReset:a.SearchToReset,onSearchBoxReloaded:r.searchBoxReloaded},null,8,["tableID","SearchToReset","onSearchBoxReloaded"]),(0,l.Wm)(n,{tableID:a.tableID,LikesToReset:a.LikesToReset,onLikesBoxReloaded:r.likesBoxReloaded},null,8,["tableID","LikesToReset","onLikesBoxReloaded"])]),(0,l._)("div",h,[(0,l.Wm)(u,{tableID:a.tableID,onReset:r.reset},null,8,["tableID","onReset"])])])}const b={class:"search"};function m(e,t,a,i,r,o){return(0,l.wg)(),(0,l.iD)("div",b,[(0,l.wy)((0,l._)("input",{id:"search",class:"search__input",type:"search",placeholder:"Поиск",onInput:t[0]||(t[0]=(...e)=>o.handle&&o.handle(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e)},null,544),[[s.nr,r.value]])])}var _={name:"SearchBox",props:{tableID:{type:String,required:!0},SearchToReset:{type:Boolean,default:()=>!1}},data(){return{value:""}},methods:{handle(){$$(this.tableID).filterByAll()}},watch:{SearchToReset(e){e&&(this.value="",this.$emit("searchBoxReloaded"))}}},v=a(89);const p=(0,v.Z)(_,[["render",m]]);var g=p;const f={class:"likes-box"},y=(0,l._)("label",{for:"likeInput"},"Только избранное",-1);function k(e,t,a,i,r,o){return(0,l.wg)(),(0,l.iD)("div",f,[(0,l.wy)((0,l._)("input",{id:"likeInput",type:"checkbox",onChange:t[0]||(t[0]=(...e)=>o.handle&&o.handle(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>r.checked=e)},null,544),[[s.e8,r.checked]]),y])}var x={name:"LikesBox",props:{tableID:{type:String,required:!0},LikesToReset:{type:Boolean,default:()=>!1}},data(){return{checked:!1}},methods:{handle(){$$(this.tableID).filterByAll()}},watch:{LikesToReset(e){e&&(this.checked=!1,this.$emit("likesBoxReloaded"))}}};const w=(0,v.Z)(x,[["render",k]]);var R=w;const C=(0,l._)("span",null,"Настройка таблицы",-1),O=[C];function T(e,t,a,s,i,r){const o=(0,l.up)("TableSettingsOverlay");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("button",{class:"table-settings-button",onClick:t[0]||(t[0]=(...e)=>r.openOverlay&&r.openOverlay(...e))},O),(0,l.Wm)(o,{tableID:a.tableID,overlayEnabled:i.overlayEnabled,onCloseOverlay:r.closeOverlay,onReset:r.reset},null,8,["tableID","overlayEnabled","onCloseOverlay","onReset"])],64)}var I=a(7139);const D={class:"table-settings-overlay__body-container"},B=(0,l._)("h2",null,"Колонки",-1),S={class:"table-settings-overlay__checkbox-list"},N=["id","checked","onClick"],L=["for","textContent"],W={class:"table-settings-overlay__reset-container"},$=(0,l._)("span",null,"Сбросить",-1),E=[$];function G(e,t,a,s,i,r){const o=(0,l.up)("OverlayScreen");return(0,l.wg)(),(0,l.j4)(o,{overlayEnabled:a.overlayEnabled,onCloseOverlay:r.closeOverlay},{default:(0,l.w5)((()=>[(0,l._)("div",D,[B,(0,l._)("div",S,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.state,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"table-settings-overlay__checkbox-item",key:e.id},[(0,l._)("input",{type:"checkbox",id:`checkbox-${e.id}`,checked:e.hidden,onClick:e=>r.handleCheckbox(t)},null,8,N),(0,l._)("label",{for:`checkbox-${e.id}`,textContent:(0,I.zw)(e.name)},null,8,L)])))),128))]),(0,l._)("div",W,[(0,l._)("button",{class:"table-settings-overlay__reset-button",onClick:t[0]||(t[0]=(...e)=>r.handleReset&&r.handleReset(...e))},E)])])])),_:1},8,["overlayEnabled","onCloseOverlay"])}function j(e,t,a,s,i,r){const o=(0,l.up)("OverlayModal"),n=(0,l.up)("OverlayBackground");return(0,l.wg)(),(0,l.j4)(n,{overlayEnabled:a.overlayEnabled,onCloseOverlay:r.closeOverlay},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{onCloseOverlay:r.closeOverlay},{default:(0,l.w5)((()=>[(0,l.WI)(e.$slots,"default")])),_:3},8,["onCloseOverlay"])])),_:3},8,["overlayEnabled","onCloseOverlay"])}function F(e,t,a,i,r,o){return a.overlayEnabled?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"overlay",onClick:t[0]||(t[0]=(0,s.iM)(((...e)=>o.closeOverlay&&o.closeOverlay(...e)),["self"]))},[(0,l.WI)(e.$slots,"default")])):(0,l.kq)("",!0)}var H={name:"OverlayBackground",props:{overlayEnabled:{type:Boolean,default:()=>!1}},methods:{closeOverlay(){this.$emit("closeOverlay")}}};const A=(0,v.Z)(H,[["render",F]]);var V=A;const Z={class:"modal"},M={class:"modal__close-container"};function q(e,t,a,i,r,o){return(0,l.wg)(),(0,l.iD)("div",Z,[(0,l._)("div",M,[(0,l._)("div",{class:"modal__close-icon",onClick:t[0]||(t[0]=(0,s.iM)(((...e)=>o.closeOverlay&&o.closeOverlay(...e)),["stop"]))})]),(0,l.WI)(e.$slots,"default")])}var z={name:"OverlayModal",methods:{closeOverlay(){this.$emit("closeOverlay")}}};const Y=(0,v.Z)(z,[["render",q]]);var K=Y,P={name:"OverlayScreen",components:{OverlayBackground:V,OverlayModal:K},props:{overlayEnabled:{type:Boolean,default:()=>!1}},methods:{closeOverlay(){this.$emit("closeOverlay")}}};const J=(0,v.Z)(P,[["render",j]]);var U=J,Q={name:"TableSettings",components:{OverlayScreen:U},props:{tableID:{type:String,required:!0},overlayEnabled:{type:Boolean,required:!0}},data(){return{columns:{},state:[]}},methods:{init(){this.table=$$(this.tableID),this.getState()},getState(){this.columns=this.table.getColumns(!0),this.state=this.columns.map((e=>({id:e.id,name:e.header[0].text,hidden:!1})))},setState(){this.table.refreshColumns(this.columns)},closeOverlay(){this.$emit("closeOverlay")},handleCheckbox(e){const t=this.state[e].id;this.state[e].hidden?this.table.showColumn(t):this.table.hideColumn(t),this.state[e].hidden=!this.state[e].hidden},handleReset(){this.state.forEach((e=>{e.hidden&&(e.hidden=!1,this.table.showColumn(e.id));const t=this.table.getFilter(e.id);if(t){const{config:e}=t;"filter"===e.view&&t.setValue({}),"multiselect"===e.view&&t.setValue([])}this.table.markSorting("","asc")})),this.table.refreshColumns(),this.$emit("reset")}},mounted(){setTimeout((()=>{this.init()}),1e3)}};const X=(0,v.Z)(Q,[["render",G]]);var ee=X,te={name:"TableSettings",components:{TableSettingsOverlay:ee},props:{tableID:{type:String,required:!0}},data(){return{overlayEnabled:!1}},methods:{openOverlay(){this.overlayEnabled=!0},closeOverlay(){this.overlayEnabled=!1},reset(){this.$emit("reset")}}};const ae=(0,v.Z)(te,[["render",T]]);var se=ae,le={name:"FiltersRow",components:{SearchBox:g,LikesBox:R,TableSettings:se},props:{tableID:{type:String,required:!0},SearchToReset:{type:Boolean,default:()=>!1},LikesToReset:{type:Boolean,default:()=>!1}},methods:{reset(){this.$emit("reset")},likesBoxReloaded(){this.$emit("likesBoxReloaded")},searchBoxReloaded(){this.$emit("searchBoxReloaded")}}};const ie=(0,v.Z)(le,[["render",u]]);var re=ie;const oe={id:"table"};function ne(e,t,a,s,i,r){return(0,l.wg)(),(0,l.iD)("div",oe)}const de=e=>{let t="";return e.rate>0?t="table__position-rate_plus":e.rate<0&&(t="table__position-rate_minus"),`\n    <div class="table__position-container">\n      <div>${e.position}</div>\n      <div class="table__position-rate ${t}">${e.rate}</div>\n    </div>\n  `},ce=e=>`\n    <div class="table__thumb-container">\n      <img class="table__thumb" src="./assets/thumbs/${e.image}" />\n    </div>\n  `,he=e=>`\n    <div class="table__like-container">\n      <img class="table__like" src="./assets/icons/${e.like?"favorite_black_24dp.svg":"favorite_border_black_24dp.svg"}" />\n    </div>\n  `,ue={position:de,image:ce,like:he};var be=ue;const me=e=>`<img class="table__image" src="./assets/images/${e.image}" />`,_e={image:me};var ve=_e;const pe=({tableID:e,products:t,handleLike:a})=>({id:e,view:"datatable",autoConfig:!0,autowidth:!1,autoheight:!0,resizeColumn:{size:4},dragColumn:"order",scroll:!0,headerRowHeight:40,rowHeight:40,tooltip:()=>"",data:t,columns:[{id:"loss",sort:"int",css:"table__column",header:[{text:"Упущенный %",css:"table__header"},{content:"excelFilter",mode:"number",css:"table__header"}],minWidth:25,width:60,maxWidth:150},{id:"position",sort:"int",css:"table__column",header:[{text:"Позиция",css:"table__header"},{content:"excelFilter",mode:"number",css:"table__header"}],template:be.position,minWidth:50,width:100,maxWidth:150},{id:"image",css:"table__column",header:[{text:"Фото",css:"table__header"},{text:"",css:"table__header"}],template:be.image,minWidth:40,width:60,maxWidth:80,tooltip:ve.image},{id:"sku",sort:"string",css:"table__column table__column_blue",header:[{text:"Артикул",css:"table__header"},{content:"excelFilter",mode:"text",css:"table__header"}]},{id:"like",sort:"string",css:"table__column",header:[{text:"Избранное",css:"table__header table__header_hidden"},{text:"",css:"table__header table__header_hidden"}],template:e=>be.like(e),minWidth:40,width:60,maxWidth:80},{id:"schedule",sort:"string",header:[{text:"График продаж",css:"table__header"},{text:"",css:"table__header"}],css:"table__column",template:webix.Sparklines.getTemplate({type:"bar",width:30}),minWidth:200,width:250,maxWidth:300},{id:"name",sort:"string",css:"table__column table__column_blue",header:[{text:"Имя",css:"table__header"},{content:"excelFilter",mode:"text",css:"table__header"}],minWidth:200,width:250,maxWidth:300},{id:"brand",sort:"string",css:"table__column table__column_blue",header:[{text:"Бренд",css:"table__header"},{content:"excelFilter",mode:"text",css:"table__header"}]},{id:"merchant",sort:"string",css:"table__column table__column_blue",header:[{text:"Продавец",css:"table__header"},{content:"excelFilter",mode:"text",css:"table__header"}]},{id:"category",sort:"string",css:"table__column",header:[{text:"Группа",css:"table__header"},{content:"multiSelectFilter",css:"table__header"}]},{id:"remain",sort:"int",css:"table__column",header:[{text:"Остаток",css:"table__header"},{content:"excelFilter",mode:"number",css:"table__header"}]},{id:"reviews",sort:"int",css:"table__column",header:[{text:"Отзывы",css:"table__header"},{content:"excelFilter",mode:"number",css:"table__header"}]},{id:"rating",sort:"int",css:"table__column",header:[{text:"Рейтинг",css:"table__header"},{content:"excelFilter",mode:"number",css:"table__header"}]},{id:"cost",sort:"int",css:"table__column",header:[{text:"Цена",css:"table__header"},{content:"excelFilter",mode:"number",css:"table__header"}]}],onClick:{table__like:(e,t)=>a(t)}});var ge=pe,fe={name:"DataTable",props:{tableID:{type:String,required:!0},products:{type:Array,default:()=>[]},TableToReset:{type:Boolean,default:()=>!1}},computed:{likes(){return this.getLikes()},computedProducts(){const e=this.products;return e.forEach((e=>{e.id in this.likes&&(e.like=!0)})),e},config(){return ge({tableID:this.tableID,products:this.computedProducts,handleLike:this.handleLike})}},methods:{init(){webix.ready((()=>{this.table=webix.ui(this.config,this.$el),this.table.registerFilter(document.getElementById("likeInput"),{columnId:"like",prepare:function(e){return e},compare:function(e,t){return!t||!0===e}},{getValue:function(e){return e.checked},setValue:function(e,t){e.checked=t}}),this.table.registerFilter(document.getElementById("search"),{columnId:"any",prepare:function(e){return e},compare:function(e,t,a){if(t){const e=t.toLowerCase();return a.sku.toLowerCase().includes(e)||a.name.toLowerCase().includes(e)||a.brand.toLowerCase().includes(e)||a.merchant.toLowerCase().includes(e)}return!0}},{getValue:function(e){return e.value},setValue:function(e,t){e.value=t}})}))},reset(){this.table.clearAll(),this.table.load((()=>this.config))},getLikes(){const e=localStorage.getItem("likes");try{return e?JSON.parse(e):{}}catch(t){return console.error(t),{}}},setLikes(e){localStorage.setItem("likes",JSON.stringify(e))},handleLike(e){const t=this.table.getItem(e),a=this.likes;t.id in a?delete a[t.id]:a[t.id]=!0,t.like=!t.like,this.setLikes(a),this.table.updateItem(e,t)}},watch:{TableToReset(e){e&&(this.reset(),this.$emit("tableReloaded"))}},mounted(){this.init()}};const ye=(0,v.Z)(fe,[["render",ne]]);var ke=ye,xe={name:"App",components:{FiltersRow:re,DataTable:ke},data(){return{tableID:"webix-table",products:n,TableToReset:!1,SearchToReset:!1,LikesToReset:!1}},methods:{reset(){this.TableToReset=!0,this.SearchToReset=!0,this.LikesToReset=!0},tableReloaded(){this.TableToReset=!1},searchBoxReloaded(){this.SearchToReset=!1},likesBoxReloaded(){this.LikesToReset=!1}}};const we=(0,v.Z)(xe,[["render",o]]);var Re=we;(0,s.ri)(Re).mount("#app")}},t={};function a(s){var l=t[s];if(void 0!==l)return l.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,s,l,i){if(!s){var r=1/0;for(c=0;c<e.length;c++){s=e[c][0],l=e[c][1],i=e[c][2];for(var o=!0,n=0;n<s.length;n++)(!1&i||r>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[n])}))?s.splice(n--,1):(o=!1,i<r&&(r=i));if(o){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[s,l,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,i,r=s[0],o=s[1],n=s[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(l in o)a.o(o,l)&&(a.m[l]=o[l]);if(n)var c=n(a)}for(t&&t(s);d<r.length;d++)i=r[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},s=self["webpackChunkwebix_test_task"]=self["webpackChunkwebix_test_task"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(5270)}));s=a.O(s)})();
//# sourceMappingURL=app.4cef70ce.js.map