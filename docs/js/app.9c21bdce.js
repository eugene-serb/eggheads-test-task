(function(){"use strict";var e={4916:function(e,t,a){var i=a(9242),n=a(3396);const r={class:"container app"},l=(0,n._)("h1",{class:"app__header"},"Товары категории",-1);function s(e,t,a,i,s,o){const c=(0,n.up)("FiltersRow"),d=(0,n.up)("DataTable");return(0,n.wg)(),(0,n.iD)("section",r,[l,(0,n.Wm)(c,{tableID:s.tableID},null,8,["tableID"]),(0,n.Wm)(d,{tableID:s.tableID,products:s.products},null,8,["tableID","products"])])}var o=JSON.parse('[{"id":1,"sku":"CGN-00871","brand":"California Gold Nutrition","name":"California Gold Nutrition, Baby\'s DHA, Omega-3s with Vitamin D3, 1,050 mg, 2 fl oz (59 ml)","image":"iherb-2.jpg","merchant":"IHerb","category":"Витамины","remain":1002,"reviews":97789,"rating":4.1,"cost":10.06,"loss":10,"position":1,"rate":"-2","like":false,"schedule":[82,92,1,5,10,12,13,18,20,38,54,58,1,5,10,12,13,15,70,78,15,18,20,38,54,58,70,78,82,92]},{"id":2,"sku":"CGN-01034","brand":"California Gold Nutrition","name":"California Gold Nutrition, жидкий витамин D3 для детей, 10 мкг (400 МЕ), 10 мл (0,34 жидк. унции)","image":"iherb.jpg","merchant":"IHerb","category":"Витамины","remain":1003,"reviews":97789,"rating":4.2,"cost":15.27,"loss":15,"position":2,"rate":"-2","like":false,"schedule":[38,54,58,70,78,82,92,1,5,1,5,10,12,13,15,18,20,10,12,13,15,18,20,38,54,58,70,78,82,92]},{"id":3,"sku":"CGN-00871","brand":"California Gold Nutrition","name":"California Gold Nutrition, Baby\'s DHA, Omega-3s with Vitamin D3, 1,050 mg, 2 fl oz (59 ml)","image":"iherb-2.jpg","merchant":"IHerb","category":"Витамины","remain":1004,"reviews":97789,"rating":4.3,"cost":10.06,"loss":25,"position":3,"rate":"0","like":false,"schedule":[1,5,10,12,13,15,18,20,38,54,58,70,13,15,18,20,38,54,58,78,82,92,1,5,10,12,70,78,82,92]},{"id":4,"sku":"NWY-15786","brand":"Nature\'s Way, Alive!","name":"Nature\'s Way, Alive! Kid\'s Chewable Multivitamin, Orange & Berry, 120 Chewable Tablets","image":"iherb-3.jpg","merchant":"IHerb","category":"Витамины","remain":1005,"reviews":97789,"rating":4.4,"cost":3.62,"loss":25,"position":4,"rate":"-2","like":false,"schedule":[1,5,10,12,54,58,70,78,82,92,1,5,10,12,13,13,15,18,20,38,15,18,20,38,54,58,70,78,82,92]},{"id":5,"sku":"CGN-01034","brand":"California Gold Nutrition","name":"California Gold Nutrition, жидкий витамин D3 для детей, 10 мкг (400 МЕ), 10 мл (0,34 жидк. унции)","image":"iherb.jpg","merchant":"IHerb","category":"Витамины","remain":1006,"reviews":97789,"rating":4.5,"cost":15.27,"loss":25,"position":5,"rate":"0","like":false,"schedule":[1,5,10,12,13,15,18,20,15,18,20,38,54,58,70,78,82,92,38,54,58,70,78,82,92,1,5,10,12,13]},{"id":6,"sku":"CGN-00871","brand":"California Gold Nutrition","name":"California Gold Nutrition, Baby\'s DHA, Omega-3s with Vitamin D3, 1,050 mg, 2 fl oz (59 ml)","image":"iherb-2.jpg","merchant":"IHerb","category":"Витамины","remain":1007,"reviews":97789,"rating":4.6,"cost":10.06,"loss":25,"position":6,"rate":"+2","like":false,"schedule":[78,82,92,1,5,10,12,13,15,18,20,1,5,10,12,13,15,18,20,38,54,58,70,38,54,58,70,78,82,92]},{"id":7,"sku":"CGN-01034","brand":"California Gold Nutrition","name":"California Gold Nutrition, жидкий витамин D3 для детей, 10 мкг (400 МЕ), 10 мл (0,34 жидк. унции)","image":"iherb.jpg","merchant":"IHerb","category":"Витамины","remain":1008,"reviews":97789,"rating":4.7,"cost":15.27,"loss":50,"position":7,"rate":"-2","like":false,"schedule":[1,5,10,12,13,15,18,20,12,13,15,18,20,38,54,58,70,38,54,58,70,78,82,92,1,5,10,78,82,92]},{"id":8,"sku":"NWY-15786","brand":"Nature\'s Way, Alive!","name":"Nature\'s Way, Alive! Kid\'s Chewable Multivitamin, Orange & Berry, 120 Chewable Tablets","image":"iherb-3.jpg","merchant":"IHerb","category":"Витамины","remain":1009,"reviews":97789,"rating":4.8,"cost":3.62,"loss":100,"position":8,"rate":"+2","like":false,"schedule":[1,5,10,12,13,15,18,20,38,54,58,70,78,15,18,20,38,54,58,70,78,82,92,1,5,10,12,13,82,92]},{"id":9,"sku":"NWY-15786","brand":"Nature\'s Way, Alive!","name":"Nature\'s Way, Alive! Kid\'s Chewable Multivitamin, Orange & Berry, 120 Chewable Tablets","image":"iherb-3.jpg","merchant":"IHerb","category":"Витамины","remain":1010,"reviews":97789,"rating":4.9,"cost":3.62,"loss":25,"position":9,"rate":"0","like":false,"schedule":[1,5,10,12,13,15,70,78,82,92,1,5,10,12,13,18,20,38,54,58,15,18,20,38,54,58,70,78,82,92]},{"id":10,"sku":"CGN-01034","brand":"California Gold Nutrition","name":"California Gold Nutrition, жидкий витамин D3 для детей, 10 мкг (400 МЕ), 10 мл (0,34 жидк. унции)","image":"iherb.jpg","merchant":"IHerb","category":"Витамины","remain":1001,"reviews":97789,"rating":4,"cost":15.27,"loss":25,"position":10,"rate":"+2","like":false,"schedule":[1,5,10,12,13,15,18,20,38,54,58,70,78,82,92,1,5,10,12,13,15,18,20,38,54,58,70,78,82,92]}]');const c={class:"filters-row"},d={class:"filters-row__left-container"},u={class:"filters-row__right-container"};function h(e,t,a,i,r,l){const s=(0,n.up)("SearchBox"),o=(0,n.up)("LikesBox"),h=(0,n.up)("TableSettings");return(0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("div",d,[(0,n.Wm)(s,{tableID:a.tableID},null,8,["tableID"]),(0,n.Wm)(o,{tableID:a.tableID},null,8,["tableID"])]),(0,n._)("div",u,[(0,n.Wm)(h,{tableID:a.tableID},null,8,["tableID"])])])}const b={class:"search"},m=(0,n._)("img",{class:"search__image",src:"/assets/icons/search_black_24dp.svg"},null,-1);function _(e,t,a,i,r,l){return(0,n.wg)(),(0,n.iD)("div",b,[m,(0,n._)("input",{id:"search",class:"search__input",type:"search",placeholder:"Поиск",onInput:t[0]||(t[0]=(...e)=>l.handle&&l.handle(...e))},null,32)])}var v={name:"SearchBox",props:{tableID:{type:String,required:!0}},methods:{handle(){$$(this.tableID).filterByAll()}}},g=a(89);const p=(0,g.Z)(v,[["render",_]]);var y=p;const f={class:"likes-box"},k=(0,n._)("label",{for:"likeInput"},"Только избранное",-1);function w(e,t,a,i,r,l){return(0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("input",{id:"likeInput",type:"checkbox",onChange:t[0]||(t[0]=(...e)=>l.handle&&l.handle(...e))},null,32),k])}var C={name:"LikesBox",props:{tableID:{type:String,required:!0}},methods:{handle(){$$(this.tableID).filterByAll()}}};const I=(0,g.Z)(C,[["render",w]]);var O=I;const D=(0,n._)("img",{src:"/assets/icons/settings_black_24dp.svg"},null,-1),x=(0,n._)("span",null,"Настройка таблицы",-1),N=[D,x];function W(e,t,a,i,r,l){const s=(0,n.up)("TableSettingsOverlay");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("button",{class:"table-settings-button",onClick:t[0]||(t[0]=(...e)=>l.openOverlay&&l.openOverlay(...e))},N),(0,n.Wm)(s,{tableID:a.tableID,overlayEnabled:r.overlayEnabled,onCloseOverlay:l.closeOverlay},null,8,["tableID","overlayEnabled","onCloseOverlay"])],64)}var $=a(7139);const S={class:"table-settings-overlay__body-container"},B=(0,n._)("h2",null,"Колонки",-1),E={class:"table-settings-overlay__checkbox-list"},G=["id","checked","onClick"],j=["for","textContent"],H={class:"table-settings-overlay__reset-container"},T=(0,n._)("span",null,"Сбросить",-1),L=[T];function A(e,t,a,i,r,l){const s=(0,n.up)("OverlayScreen");return(0,n.wg)(),(0,n.j4)(s,{overlayEnabled:a.overlayEnabled,onCloseOverlay:l.closeOverlay},{default:(0,n.w5)((()=>[(0,n._)("div",S,[B,(0,n._)("div",E,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.state,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:"table-settings-overlay__checkbox-item",key:e.id},[(0,n._)("input",{type:"checkbox",id:`checkbox-${e.id}`,checked:e.hidden,onClick:e=>l.handleCheckbox(t)},null,8,G),(0,n._)("label",{for:`checkbox-${e.id}`,textContent:(0,$.zw)(e.name)},null,8,j)])))),128))]),(0,n._)("div",H,[(0,n._)("button",{class:"table-settings-overlay__reset-button",onClick:t[0]||(t[0]=(...e)=>l.handleReset&&l.handleReset(...e))},L)])])])),_:1},8,["overlayEnabled","onCloseOverlay"])}function Z(e,t,a,i,r,l){const s=(0,n.up)("OverlayModal"),o=(0,n.up)("OverlayBackground");return(0,n.wg)(),(0,n.j4)(o,{overlayEnabled:a.overlayEnabled,onCloseOverlay:l.closeOverlay},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{onCloseOverlay:l.closeOverlay},{default:(0,n.w5)((()=>[(0,n.WI)(e.$slots,"default")])),_:3},8,["onCloseOverlay"])])),_:3},8,["overlayEnabled","onCloseOverlay"])}function M(e,t,a,r,l,s){return a.overlayEnabled?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"overlay",onClick:t[0]||(t[0]=(0,i.iM)(((...e)=>s.closeOverlay&&s.closeOverlay(...e)),["self"]))},[(0,n.WI)(e.$slots,"default")])):(0,n.kq)("",!0)}var q={name:"OverlayBackground",props:{overlayEnabled:{type:Boolean,default:()=>!1}},methods:{closeOverlay(){this.$emit("closeOverlay")}}};const R=(0,g.Z)(q,[["render",M]]);var V=R;const z={class:"modal"},F={class:"modal__close-container"};function Y(e,t,a,r,l,s){return(0,n.wg)(),(0,n.iD)("div",z,[(0,n._)("div",F,[(0,n._)("img",{src:"/assets/icons/close_black_24dp.svg",onClick:t[0]||(t[0]=(0,i.iM)(((...e)=>s.closeOverlay&&s.closeOverlay(...e)),["stop"]))})]),(0,n.WI)(e.$slots,"default")])}var K={name:"OverlayModal",methods:{closeOverlay(){this.$emit("closeOverlay")}}};const P=(0,g.Z)(K,[["render",Y]]);var J=P,Q={name:"OverlayScreen",components:{OverlayBackground:V,OverlayModal:J},props:{overlayEnabled:{type:Boolean,default:()=>!1}},methods:{closeOverlay(){this.$emit("closeOverlay")}}};const U=(0,g.Z)(Q,[["render",Z]]);var X=U,ee={name:"TableSettings",components:{OverlayScreen:X},props:{tableID:{type:String,required:!0},overlayEnabled:{type:Boolean,required:!0}},data(){return{columns:{},state:[]}},methods:{getState(){this.columns=$$(this.tableID).getColumns(!0),this.state=this.columns.map((e=>({id:e.id,name:e.header[0].text,hidden:!1})))},setState(){$$(this.tableID).refreshColumns(this.columns)},closeOverlay(){this.$emit("closeOverlay")},handleCheckbox(e){const t=this.state[e].id;this.state[e].hidden?$$(this.tableID).showColumn(t):$$(this.tableID).hideColumn(t),this.state[e].hidden=!this.state[e].hidden},handleReset(){this.state.forEach((e=>{e.hidden&&(e.hidden=!1,$$(this.tableID).showColumn(e.id))}))}},mounted(){setTimeout((()=>{this.getState()}),1e3)}};const te=(0,g.Z)(ee,[["render",A]]);var ae=te,ie={name:"TableSettings",components:{TableSettingsOverlay:ae},props:{tableID:{type:String,required:!0}},data(){return{overlayEnabled:!1}},methods:{openOverlay(){this.overlayEnabled=!0},closeOverlay(){this.overlayEnabled=!1}}};const ne=(0,g.Z)(ie,[["render",W]]);var re=ne,le={name:"FiltersRow",components:{SearchBox:y,LikesBox:O,TableSettings:re},props:{tableID:{type:String,required:!0}}};const se=(0,g.Z)(le,[["render",h]]);var oe=se;const ce={id:"table"};function de(e,t,a,i,r,l){return(0,n.wg)(),(0,n.iD)("div",ce)}const ue=e=>{let t="";return e.rate>0?t="table__position-rate_plus":e.rate<0&&(t="table__position-rate_minus"),`\n    <div class="table__position-container">\n      <div>${e.position}</div>\n      <div class="table__position-rate ${t}">${e.rate}</div>\n    </div>\n  `},he=e=>`\n    <div class="table__thumb-container">\n      <img class="table__thumb" src="/assets/thumbs/${e.image}" />\n    </div>\n  `,be=e=>`\n    <div class="table__like-container">\n      <img class="table__like" src="/assets/icons/${e.like?"favorite_black_24dp.svg":"favorite_border_black_24dp.svg"}" />\n    </div>\n  `,me={position:ue,image:he,like:be};var _e=me;const ve=e=>`<img class="table__image" src="/assets/images/${e.image}" />`,ge={image:ve};var pe=ge;const ye=({tableID:e,products:t,handleLike:a})=>({id:e,view:"datatable",autoConfig:!0,autowidth:!1,autoheight:!0,resizeColumn:{size:4},dragColumn:"order",scroll:!0,headerRowHeight:40,rowHeight:40,tooltip:()=>"",data:t,columns:[{id:"loss",sort:"int",css:"table__column",header:[{text:"Упущенный %",css:"table__header"}],minWidth:25,width:60,maxWidth:150},{id:"position",sort:"int",css:"table__column",header:[{text:"Позиция",css:"table__header"}],template:_e.position,minWidth:50,width:100,maxWidth:150},{id:"image",css:"table__column",header:[{text:"Фото",css:"table__header"}],template:_e.image,minWidth:40,width:60,maxWidth:80,tooltip:pe.image},{id:"sku",sort:"string",css:"table__column table__column_blue",header:[{text:"Артикул",css:"table__header"}]},{id:"like",sort:"string",css:"table__column",header:[{text:"Избранное",css:"table__header table__header_hidden"}],template:e=>_e.like(e),minWidth:40,width:60,maxWidth:80},{id:"schedule",sort:"string",header:[{text:"График продаж",css:"table__header"}],css:"table__column",template:webix.Sparklines.getTemplate({type:"bar",width:30}),minWidth:200,width:250,maxWidth:300},{id:"name",sort:"string",css:"table__column table__column_blue",header:[{text:"Имя",css:"table__header"}],minWidth:200,width:250,maxWidth:300},{id:"brand",sort:"string",css:"table__column table__column_blue",header:[{text:"Бренд",css:"table__header"}]},{id:"merchant",sort:"string",css:"table__column table__column_blue",header:[{text:"Продавец",css:"table__header"}]},{id:"category",sort:"string",css:"table__column",header:[{text:"Группа",css:"table__header"}]},{id:"remain",sort:"int",css:"table__column",header:[{text:"Остаток",css:"table__header"}]},{id:"reviews",sort:"int",css:"table__column",header:[{text:"Отзывы",css:"table__header"}]},{id:"rating",sort:"int",css:"table__column",header:[{text:"Рейтинг",css:"table__header"}]},{id:"cost",sort:"int",css:"table__column",header:[{text:"Цена",css:"table__header"}]}],onClick:{table__like:(e,t)=>a(t)}});var fe=ye,ke={name:"DataTable",props:{tableID:{type:String,required:!0},products:{type:Array,default:()=>[]}},computed:{likes(){return this.getLikes()},computedProducts(){const e=this.products;return e.forEach((e=>{e.id in this.likes&&(e.like=!0)})),e},config(){return fe({tableID:this.tableID,products:this.computedProducts,handleLike:this.handleLike})}},methods:{init(){webix.ready((()=>{this.table=webix.ui(this.config,this.$el),this.table.registerFilter(document.getElementById("likeInput"),{columnId:"like",prepare:function(e){return e},compare:function(e,t){return!t||!0===e}},{getValue:function(e){return e.checked},setValue:function(e,t){e.checked=t}}),this.table.registerFilter(document.getElementById("search"),{columnId:"any",prepare:function(e){return e},compare:function(e,t,a){return!t||(a.sku.toLowerCase().includes(t)||a.name.toLowerCase().includes(t)||a.brand.toLowerCase().includes(t)||a.merchant.toLowerCase().includes(t))}},{getValue:function(e){return e.value},setValue:function(e,t){e.value=t}})}))},getLikes(){const e=localStorage.getItem("likes");try{return e?JSON.parse(e):{}}catch(t){return console.error(t),{}}},setLikes(e){localStorage.setItem("likes",JSON.stringify(e))},handleLike(e){const t=this.table.getItem(e),a=this.likes;t.id in a?delete a[t.id]:a[t.id]=!0,t.like=!t.like,this.setLikes(a),this.table.updateItem(e,t)}},mounted(){this.init()}};const we=(0,g.Z)(ke,[["render",de]]);var Ce=we,Ie={name:"App",components:{FiltersRow:oe,DataTable:Ce},data(){return{tableID:"webix-table",products:o}}};const Oe=(0,g.Z)(Ie,[["render",s]]);var De=Oe;(0,i.ri)(De).mount("#app")}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,i,n,r){if(!i){var l=1/0;for(d=0;d<e.length;d++){i=e[d][0],n=e[d][1],r=e[d][2];for(var s=!0,o=0;o<i.length;o++)(!1&r||l>=r)&&Object.keys(a.O).every((function(e){return a.O[e](i[o])}))?i.splice(o--,1):(s=!1,r<l&&(l=r));if(s){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[i,n,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,r,l=i[0],s=i[1],o=i[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(o)var d=o(a)}for(t&&t(i);c<l.length;c++)r=l[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},i=self["webpackChunkwebix_test_task"]=self["webpackChunkwebix_test_task"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(4916)}));i=a.O(i)})();
//# sourceMappingURL=app.9c21bdce.js.map